# =========================
# App
# =========================
spring.application.name=Proyecto
server.port=8080

# =========================
# Datasource (PostgreSQL en Docker)
# El hostname del servicio es "db" (como en docker-compose)
# =========================
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://localhost:5432/${POSTGRES_DB:appdb}?currentSchema=public
spring.datasource.username=${POSTGRES_USER:app}
spring.datasource.password=${POSTGRES_PASSWORD:app}

# Pool de conexiones (Hikari)
spring.datasource.hikari.pool-name=HikariCP
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.connection-timeout=30000

# =========================
# JPA / Hibernate
# Puedes sobreescribir con variables de entorno ya definidas en tu compose:
#  - SPRING_JPA_HIBERNATE_DDL_AUTO
#  - SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT
# =========================
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# =========================
# Scripts SQL de inicio (opcional)
# =========================
spring.sql.init.mode=never
spring.sql.init.platform=postgres
spring.sql.init.encoding=UTF-8

# =========================
# Logging
# =========================
logging.level.org.springframework=INFO
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=

# =========================
# CONFIGURACION DE BIBLIOTECA
# =========================
biblioteca.prestamo.max-prestamos-activos=5
biblioteca.prestamo.dias-prestamo=15
biblioteca.prestamo.estudiante-max-prestamos=3
biblioteca.prestamo.docente-max-prestamos=10

# =========================
# Configuración de Email
# =========================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# =========================
# Configuración de Thymeleaf para emails
# =========================
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false